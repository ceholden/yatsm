

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>yatsm.reader module &mdash; YATSM 0.2.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="YATSM 0.2.0 documentation" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> YATSM</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#virtualenv">virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#python-dependencies">Python Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#quick-installation">Quick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#developer-installation">Developer Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#virtual-machine-image">Virtual Machine Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/install.html#platform-support">Platform Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/dataset.html">Dataset Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/exploration.html">Model Parameter Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/configuration.html">Model Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/configuration.html#configuration-file">Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/configuration.html#dataset-parameters">Dataset Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/configuration.html#model-parameters">Model Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/configuration.html#classification">Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/configuration.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/batch_interface.html">Batch Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/batch_interface.html#sun-grid-engine">Sun Grid Engine</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/map_static.html">Mapping Derived Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_static.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_static.html#missing-values">Missing Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_static.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_static.html#docs-todo">Docs TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/map_changes.html">Mapping Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_changes.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/map_changes.html#docs-todo">Docs TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/classification.html">Classification</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/scripts.html">Command Line Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../scripts/gen_date_file.html"><cite>gen_date_file.sh</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/run_yatsm.html"><cite>run_yatsm.py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/line_yatsm.html"><cite>line_yatsm.py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/yatsm_changemap.html"><cite>yatsm_changemap.py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/yatsm_map.html"><cite>yatsm_map.py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/train_yatsm.html"><cite>train_yatsm.py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/classify_yatsm.html"><cite>classify_yatsm.py</cite></a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">YATSM</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>yatsm.reader module</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/ceholden/yatsm/blob/master/docs/yatsm/yatsm.reader.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="module-yatsm.reader">
<span id="yatsm-reader-module"></span><h1>yatsm.reader module<a class="headerlink" href="#module-yatsm.reader" title="Permalink to this headline">¶</a></h1>
<p>Functions for reading timeseries data</p>
<dl class="class">
<dt id="yatsm.reader.GDALStackReader">
<em class="property">class </em><tt class="descclassname">yatsm.reader.</tt><tt class="descname">GDALStackReader</tt><big>(</big><em>filenames</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#GDALStackReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.GDALStackReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Simple class to read stacks using GDAL, keeping file objects open</p>
<p>Some tests have shown that we can speed up total dataset read time by
storing the file object references to each image as we loop over many rows
instead of opening once per row read. This is a simple class designed to
store these references.</p>
<p>Note that this class assumes the images are &#8220;stacked&#8221; &#8211; that is that all
images contain the same number of rows, columns, and bands, and the images
are of the same geographic extent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filenames</strong> (<em>list</em>) &#8211; list of filenames to read from</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.filenames">
<tt class="descname">filenames</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.filenames" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em></p>
<p>list of filenames to read from</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.n_image">
<tt class="descname">n_image</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.n_image" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>number of images</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.n_band">
<tt class="descname">n_band</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.n_band" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>number of bands in an image</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.n_col">
<tt class="descname">n_col</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.n_col" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>number of columns per row</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.datatype">
<tt class="descname">datatype</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.datatype" title="Permalink to this definition">¶</a></dt>
<dd><p><em>np.dtype</em></p>
<p>NumPy datatype of images</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.datasets">
<tt class="descname">datasets</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.datasets" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em></p>
<p>list of GDAL datasets for all filenames</p>
</dd></dl>

<dl class="attribute">
<dt id="yatsm.reader.GDALStackReader.dataset_bands">
<tt class="descname">dataset_bands</tt><a class="headerlink" href="#yatsm.reader.GDALStackReader.dataset_bands" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em></p>
<p>list of lists containing all GDAL raster band
datasets, for all image filenames</p>
</dd></dl>

<dl class="method">
<dt id="yatsm.reader.GDALStackReader.read_row">
<tt class="descname">read_row</tt><big>(</big><em>row</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#GDALStackReader.read_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.GDALStackReader.read_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a 3D NumPy array (nband x nimage x ncol) of image data from
one row</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>row</strong> (<em>int</em>) &#8211; row in image to return</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data</strong> &#8211;
3D NumPy array (nband x nimage x ncol) of image<blockquote>
<div>data for desired row</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">np.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="yatsm.reader.find_stack_images">
<tt class="descclassname">yatsm.reader.</tt><tt class="descname">find_stack_images</tt><big>(</big><em>location, folder_pattern='L*', image_pattern='L*stack', date_index_start=9, date_index_end=16, date_format='%Y%j', ignore=['YATSM']</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#find_stack_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.find_stack_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and identify dates and filenames of Landsat image stacks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>location</strong> (<em>str</em>) &#8211; Stacked image dataset location</li>
<li><strong>folder_pattern</strong> (<em>str, optional</em>) &#8211; Filename pattern for stack image
folders located within <cite>location</cite> (default: &#8216;L*&#8217;)</li>
<li><strong>image_pattern</strong> (<em>str, optional</em>) &#8211; Filename pattern for stacked images
located within each folder (default: &#8216;L*stack&#8217;)</li>
<li><strong>date_index_start</strong> (<em>int, optional</em>) &#8211; Starting index of image date string
within folder name (default: 9)</li>
<li><strong>date_index_end</strong> (<em>int, optional</em>) &#8211; Ending index of image date string within
folder name (default: 16)</li>
<li><strong>date_format</strong> (<em>str, optional</em>) &#8211; String format of date within folder names
(default: &#8216;%Y%j&#8217;)</li>
<li><strong>ignore</strong> (<em>list, optional</em>) &#8211; List of folder names within <cite>location</cite> to
ignore from search (default: [&#8216;YATSM&#8217;])</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Tuple of lists containing the dates and filenames of all stacked
images located</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.reader.get_image_attribute">
<tt class="descclassname">yatsm.reader.</tt><tt class="descname">get_image_attribute</tt><big>(</big><em>image_filename</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#get_image_attribute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.get_image_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Use GDAL to open image and return some attributes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image_filename</strong> (<em>string</em>) &#8211; image filename</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>tuple</strong> &#8211;
nrow, ncol, nband, NumPy datatype</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int, int, int, type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.reader.read_pixel_timeseries">
<tt class="descclassname">yatsm.reader.</tt><tt class="descname">read_pixel_timeseries</tt><big>(</big><em>files</em>, <em>px</em>, <em>py</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#read_pixel_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.read_pixel_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns NumPy array containing timeseries values for one pixel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>files</strong> (<em>list</em>) &#8211; List of filenames to read from</li>
<li><strong>px</strong> (<em>int</em>) &#8211; Pixel X location</li>
<li><strong>py</strong> (<em>int</em>) &#8211; Pixel Y location</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">np.ndarray: Array (nband x n_images) containing all timeseries data
from one pixel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.reader.read_row_BIP">
<tt class="descclassname">yatsm.reader.</tt><tt class="descname">read_row_BIP</tt><big>(</big><em>filename</em>, <em>row</em>, <em>size</em>, <em>dtype</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#read_row_BIP"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.read_row_BIP" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in an entire row of data from a BIP image</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) &#8211; filename to read from</li>
<li><strong>row</strong> (<em>int</em>) &#8211; row to read</li>
<li><strong>size</strong> (<em>tuple</em>) &#8211; tuple of (int, int) containing the number of columns and
bands in the image</li>
<li><strong>dtype</strong> (<em>np.dtype</em>) &#8211; NumPy datatype of the image</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> &#8211;
2D array (nband x ncol) containing the row of data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.reader.read_row_GDAL">
<tt class="descclassname">yatsm.reader.</tt><tt class="descname">read_row_GDAL</tt><big>(</big><em>filenames</em>, <em>row</em><big>)</big><a class="reference internal" href="../_modules/yatsm/reader.html#read_row_GDAL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.reader.read_row_GDAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in an entire row of data from an image using GDAL</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>iterable</em>) &#8211; sequence of filenames to read from</li>
<li><strong>row</strong> (<em>int</em>) &#8211; row to read</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>data</strong> &#8211;
3D array (nband x nimage x ncol) containing the row</p>
<blockquote>
<div><p>of data</p>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 - 2015, Chris Holden.
      Last updated on Fri Feb 20 14:30:10 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>